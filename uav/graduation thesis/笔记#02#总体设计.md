## 总体设计

在开始一切阐述之前，有必要先对系统的总体进行一个描绘。

我会把整体思路（顶层设计），实际效果做一个阐述，演示

首先需要运行并使用该地面站

首先应当将飞控通过物理设备与地面站所运行的硬件进行连接。

如下图所示

这里有一张图。



连接好后。我们找到编译好的地面站软件的那个图标，双击它。此时会弹出一个窗口，以及后台信息窗口，提示我们web socket服务已经开启。这个时候我们选择连接飞控硬件的相应端口，以及波特率（通常为辣个，具体飞控可能略有不同）。看到飞控 的 xx指示灯亮了以后，我们点击连接。此时信息窗口会有一个连接成功的提示。

这里有一张图。



这样我就可以通过浏览器，访问地面站的前端视图了。在本地打开那个网页就可以了。

这里有一张图。



首先，左上角是一个飞行姿态仪器。这是啥玩意儿这儿阐述吧

整个背景是高德地图。实时显示飞机的位置。

右上角是飞机的实时基本数据。



最后是有一个对飞机实时飞行姿态的3D建模。它可以更直观的反映 飞机的飞行姿态。便于我们进一步决策。

这里有一张图



软件的实际运行效果就是这样。然后来看运行的基本原理

首先是要确保物理连接

然后我们通过C#的serial Port对象 与飞控建立实际的数据连接。

然后是通过MavLink消息进行通信，基本步骤是这样的，一旦连接飞控，我们向其按一定频率发送一个心跳包，以及数据请求包。飞控 返回数据，我们通过一个消息处理器，对消息进行处理，这部分是解耦的，我们可以采取自己希望采用的方式来处理消息。而我的方式就是将Mavlink转发到浏览器端进行显示。至于具体的程序构造，将再下文进一步阐述。我将采取完全面向对象的方式进行构造软件。



这里放个图吧



面向对象的最核心的法则只有 一条：对象是服务的提供者。

总体的设计就是这样。接下来进行分模块讲解。